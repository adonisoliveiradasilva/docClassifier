repos:
  - repo: https://github.com/ambv/black
    rev: 24.8.0
    hooks:
    - id: black
      language_version: python3.11
      require_serial: true
      stages: [commit]
      args:
        - --line-length=120
        - api/src/

  - repo: https://github.com/pre-commit/mirrors-isort
    rev: v5.10.0
    hooks:
      - id: isort
        args: ["--profile", "black"]

  - repo: https://github.com/pycqa/flake8
    rev: 7.1.1
    hooks:
      - id: flake8
        require_serial: true
        stages: [commit]
        args:
          - --max-line-length=120
          - --extend-ignore=E203
          - --extend-ignore=W503
        files: ^api/.*\.py$

  - repo: local
    hooks:
      - id: mypy
        name: mypy
        entry: bash -c 'mypy --show-error-codes api/src/'
        always_run: true
        require_serial: true
        language: system
        stages: [commit]

    repos:
  - repo: https://github.com/PyCQA/bandit
    rev: 1.7.9
    hooks:
      - id: bandit
        args:
          - -c
          - api/bandit.yaml
          - -r
          - api/src

      # - id: pylint
      #   name: pylint
      #   entry: venv/Scripts/pylint.exe api
      #   language: system
      #   pass_filenames: true
      #   stages: [commit]
      #   args: ["--rcfile=api/.pylintrc", "--output-format=colorized"]



      # - id: requirements
      #   name: requirements
      #   entry: powershell -Command "venv\Scripts\python.exe -m pip freeze > api\requirements.txt; git add api\requirements.txt"
      #   language: system
      #   pass_filenames: false

